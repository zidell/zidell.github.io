<!DOCTYPE html>
<html lang="">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<title>Title Page</title>

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->

		
		<!-- 필요한 라이브러리만 주석해제하시면 됩니다. -->
	    <link rel="stylesheet" type="text/css" href="./app.css?a=2">
		<script src="./jquery.min.js"></script>
		<script>
			function readText(filePath){
				var output = ""; //placeholder for text output
				if(filePath.files && filePath.files[0]) {           
			    	var reader = new FileReader();
				    reader.onload = function (e) {
				    	$(window).scrollTop(0);
				        $('#content').html(convertText(reader.result));
				    };//end onload()
				    reader.readAsText(filePath.files[0]);
				}//end if html5 filelist support
				return true;
			}

			function move(direction) {
				var top = $(window).scrollTop();
				var height = $(window).height();
				var amount = height * 0.95;
				var pl = direction === 'up' ? -1 : 1;
				var decHeight = $(document).height();
				var newTop = top + amount * pl;
				$(window).scrollTop(newTop);
				$('#progress').html(Math.floor(newTop / decHeight * 100) + '%').show();
				setTimeout(function() {
					$('#progress').hide();
				}, 500);
			}

			function convertText(str) {
				return '<p>'+ str
					.toString()
					.replace(/[\r]{2,}/g, '</p><br /><p>')
					.replace(/(\.|"|\)|\])[\r]/g, function(match, contents){
						return match + '</p><p>';
					})
					.replace(/\r\s?/g, '')
					'</p>';
			}
			$(document).on('keyup', function(e){
				console.log("e.keyCode", e.keyCode);
				if (e.keyCode === 40) {
					move('down');
				} else if (e.keyCode === 38) {
					move('up');
				}
			})
		</script>
	</head>

	<body>
		<div id="root">
			<input type="file" onchange="readText(this)" />
			<br/>
			<br/>
			<div id="content"></div>
			<br/>
			<br/>
			<input type="file" onchange="readText(this)" />
			<div id="btn-up" onclick="move('up')"></div>
			<div id="btn-down" onclick="move('down')"></div>
			<div id="progress">20%</div>
		</div>
	</body>
</html>